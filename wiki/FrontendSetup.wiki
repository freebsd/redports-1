= !HowTo Setup a Redports Frontend =

A Redports Frontend runs the web interface for the user and is also the master that coordinates the communication to the backend nodes. All of those services can be separated in his own jail which is recommended for improved security.


== Web Interface ==

=== Requirements ===

  * www/trac
  * www/trac-accountmanager
  * www/nginx
  * mail/exim
  * devel/subversion
  * databases/postgresql93-client

=== Trac ===

For 


== Dispatcher ==

=== Requirements ===

  * databases/postgresql93-server
  * databases/postgresql93-client
  * ftp/curl

=== rc.conf ===

{{{
# redports platform
postgresql_enable="YES"
rpdd_enable="YES"
}}}

=== PostgreSQL Database ===

If you are in a jail you need to ensure that `allow.sysvipc` is set.

{{{
/usr/local/etc/rc.d/postgresql initdb
/usr/local/etc/rc.d/postgresql start
su pgsql
createuser trac
createuser dispatcher
createdb trac -O trac
}}}


=== Redports Dispatcher ===

You need to compile and install the latest rpdd.

{{{
svn co http://redports.googlecode.com/svn/trunk/rpdd
cd rpdd
make install clean
}}}

Create a rpdd.conf according to your needs.

{{{
cp -p /usr/local/etc/rpdd.conf-dist /usr/local/etc/rpdd.conf
vi /usr/local/etc/rpdd.conf
}}}



== Subversion repository ==


=== Requirements ===

  * devel/subversion


== Proxy ===

A proxy is recommended for fetching distfiles because it allows to isolate the backends completely from the internet. www/squid33 has been tested and works flawless.

All you need to do is add your private IP range to the squid.conf to allow your backends to use the proxy.

*squid.conf*
{{{
# address range of the backends
acl localnet src fd97:add1:ffff:aaaa::/64

# only listen on the required IP
http_port [fd97:add1:ffff:aaaa::a1]:3128
}}}